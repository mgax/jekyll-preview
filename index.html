<!doctype html>

<body>

<textarea></textarea>
<div id="preview"></div>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"></script>

<script>
(function() {
  'use strict';
  var $textarea = $('textarea');
  var $preview = $('#preview');
  var text = '';

  setInterval(refresh, 500);

  function refresh() {
    var newText = $textarea.val()
    if(newText != text) {
      text = newText;
      $preview.html(marked(text));
    }
  }
})();
</script>
